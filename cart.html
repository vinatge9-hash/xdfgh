<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Niyantri Dog Care - Cart</title>
  <meta name="description" content="Your cart at Niyantri Dog Care: dog-care services and aggregates for Hyderabad, India." />
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="min-h-screen bg-slate-50 text-slate-800 opacity-0 transition-opacity duration-1000 ease-in-out">
  <header class="w-full fixed top-0 left-0 right-0 bg-white/70 backdrop-blur-lg z-20 border-b border-slate-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <a href="./index.html" class="flex items-center gap-2 text-slate-800 font-semibold text-lg">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-amber-600" viewBox="0 0 24 24" fill="currentColor"><path d="M4 12a8 8 0 1 0 16 0A8 8 0 0 0 4 12Zm9-5a1 1 0 0 1 1 1v5h2a2 2 0 0 1 0 4h-4a1 1 0 0 1-1-1V8a3 3 0 0 1 3-3Z"/></svg>
        <span>Niyantri Dog Care</span>
      </a>
      <nav class="hidden md:flex items-center space-x-6 text-sm">
        <a href="./index.html">Home</a>
        <a href="./menu.html">Menu</a>
        <a href="./cart.html" class="font-semibold">Cart</a>
        <a href="./about.html">About</a>
        <a href="./contact.html">Contact</a>
      </nav>
    </div>
  </header>
  <main class="pt-24">
    <section class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-6 animate-on-scroll opacity-0">
      <h1 class="text-3xl font-semibold mb-4" style="font-family: 'Playfair Display', serif;">Your Cart</h1>
      <div id="cartItems" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>
      <div class="mt-6 flex items-center justify-between">
        <span class="text-lg font-semibold" id="cartTotal">Total: ₹0</span>
        <button id="paypalCheckout" class="px-4 py-2 rounded bg-gradient-to-r from-amber-500 to-orange-600 text-white">Checkout with PayPal</button>
      </div>
      <div class="mt-4">
        <button id="clearCart" class="px-4 py-2 rounded bg-slate-200 hover:bg-slate-300 transition-all duration-300">Clear Cart</button>
      </div>
    </section>
  </main>
  <footer class="bg-slate-900 text-white py-6 mt-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-sm">&copy; 2025 Niyantri Dog Care • Hyderabad, India</div>
  </footer>

  <!-- Mock PayPal modal -->
  <div id="paypalModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg p-6 w-96">
      <h3 class="text-lg font-semibold mb-2">PayPal Checkout</h3>
      <p class="text-sm text-slate-600 mb-4">Processing your payment securely with our mock PayPal API.</p>
      <div class="flex items-center justify-between">
        <span>Total: ₹<span id="modalTotal">0</span></span>
        <button id="mockPayBtn" class="px-4 py-2 rounded bg-gradient-to-r from-amber-500 to-orange-600 text-white">Pay Now</button>
      </div>
    </div>
  </div>

  <script>
    window.addEventListener('load', () => document.body.classList.remove('opacity-0'));
    const cart = {
      get(){ try { return JSON.parse(localStorage.getItem('cart') || '[]'); } catch(e){ return []; } },
      set(items){ localStorage.setItem('cart', JSON.stringify(items)); }
    };

    function renderCart(){
      const items = cart.get();
      const container = document.getElementById('cartItems');
      const totalEl = document.getElementById('cartTotal');
      container.innerHTML = '';
      let total = 0;
      if(items.length === 0){ container.innerHTML = '<p class="col-span-2 text-center text-slate-600">Your cart is empty. Add services from the Menu.</p>'; totalEl.textContent = 'Total: ₹0'; return; }
      items.forEach((it, idx) => {
        total += it.price * (it.qty || 1);
        const card = document.createElement('div');
        card.className = 'bg-white p-4 rounded-lg shadow-md';
        card.innerHTML = `
          <div class="flex items-center justify-between">
            <div>
              <div class="font-semibold">${it.name}</div>
              <div class="text-xs text-slate-500">Quantity: ${it.qty}</div>
            </div>
            <div class="font-semibold">₹${it.price * (it.qty||1)}</div>
          </div>
        `;
        container.appendChild(card);
      });
      totalEl.textContent = 'Total: ₹' + total;
    }

    function mockPayPalApi(amount){
      return new Promise((resolve) => {
        setTimeout(() => resolve({ status:'success', transactionId: 'TXN' + Date.now(), amount }), 1000);
      });
    }

    document.getElementById('clearCart').addEventListener('click', () => { localStorage.removeItem('cart'); renderCart(); });

    document.getElementById('paypalCheckout').addEventListener('click', () => {
      const items = cart.get();
      if(!items.length){ alert('Your cart is empty.'); return; }
      // Show modal with total
      document.getElementById('modalTotal').textContent = String(items.reduce((s,i)=> s + i.price * (i.qty||1), 0));
      document.getElementById('paypallModal').classList.add('hidden');
      document.getElementById('paypalModal').classList.remove('hidden');
    });

    document.getElementById('mockPayBtn').addEventListener('click', async () => {
      const items = cart.get();
      const total = items.reduce((s,i)=> s + i.price * (i.qty||1), 0);
      const res = await mockPayPalApi(total);
      if(res.status === 'success'){
        alert('Payment successful! Transaction: ' + res.transactionId);
        localStorage.removeItem('cart');
        renderCart();
        document.getElementById('paypalModal').classList.add('hidden');
      }
    });

    // Initialize cart view
    renderCart();
  </script>
</body>
</html>